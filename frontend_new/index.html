<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C.G.P.A. // FoT DU</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div id="intro-wrapper">
        <canvas id="hero-canvas"></canvas>
        <div class="intro-content">
            <h1 class="mega-text">CAMPUS<br>OS</h1>
            <p class="scroll-prompt">SCROLL TO INITIALIZE</p>
        </div>
    </div>

    <div id="guest-wrapper">
        <div class="glass-card" style="max-width:600px; text-align:left;">
            <h2>FACULTY OF TECHNOLOGY</h2>
            <p style="color:var(--accent); margin-bottom:20px;">UNIVERSITY OF DELHI</p>

            <div style="display:flex; gap:15px; flex-wrap:wrap;">
                <button class="chip" onclick="window.showAuthModal('login')"
                    style="padding:15px 30px; background:var(--accent); color:black; font-weight:bold;">
                    <i class="fas fa-sign-in-alt"></i> LOGIN
                </button>
                <button class="chip" onclick="window.showAuthModal('signup')" style="padding:15px 30px;">
                    <i class="fas fa-user-plus"></i> SIGN UP
                </button>
                <button class="chip" onclick="window.startGuestMode()"
                    style="padding:15px 30px; border-color:white; color:white;">
                    <i class="fas fa-user-secret"></i> GUEST CHAT
                </button>
            </div>
            <div style="margin-top:20px; font-size:0.8rem; color:#666;">
                Admissions: Check fot.du.ac.in
            </div>
        </div>
    </div>

    <div id="app-wrapper" style="display:none;">
        <div class="monolith">
            
            <div class="sidebar" id="sidebar">
                <div class="brand" onclick="location.reload()"><span></span> C.G.P.A.</div>
                
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; border-bottom:1px solid rgba(255,255,255,0.1); padding-bottom:15px;">
                    <div id="auth-info" style="font-size:0.8rem; color:var(--accent);">
                        USER: <span id="user-role-display">GUEST</span>
                    </div>
                    <button onclick="window.logout()" title="Logout" 
                        style="background:transparent; border:none; color:#666; cursor:pointer; transition:0.3s;">
                        <i class="fas fa-power-off"></i>
                    </button>
                </div>

                <div id="sidebar-content"></div>
            </div>

            <div class="main-view">
                <div class="tools" id="tools-bar" style="display:none;"></div>

                <div class="chat-canvas" id="chat-box">
                    <div class="msg bot">System Online. How can I assist you?</div>
                </div>

                <div class="input-zone">
                    <input type="text" id="user-input" placeholder="Type or Speak..." autocomplete="off">
                    <button class="icon-btn" id="mic-btn" onclick="window.toggleVoice()"
                        style="margin-right:10px; border-color:var(--accent);">
                        <i class="fas fa-microphone"></i>
                    </button>
                    <button class="icon-btn" onclick="window.sendMessage()"><i class="fas fa-arrow-right"></i></button>
                </div>
            </div>
        </div>
    </div>

    <div id="auth-modal" class="modal-overlay" style="display:none;">
        <div class="glass-card" style="width:400px;">
            <button onclick="document.getElementById('auth-modal').style.display='none'"
                style="float:right; background:none; border:none; color:white; cursor:pointer;">✕</button>
            <h2 id="auth-title">LOGIN</h2>

            <div style="margin:20px 0; display:flex; gap:10px; justify-content:center;">
                <button class="chip" onclick="setRole('student')" id="btn-student"
                    style="background:var(--accent); color:black;">STUDENT</button>
                <button class="chip" onclick="setRole('teacher')" id="btn-teacher">TEACHER</button>
            </div>

            <input type="email" id="email-in" placeholder="Email ID"
                style="width:100%; padding:12px; margin-bottom:10px; background:black; border:1px solid #333; color:white;">
            <input type="password" id="pass-in" placeholder="Password"
                style="width:100%; padding:12px; margin-bottom:20px; background:black; border:1px solid #333; color:white;">

            <button class="chip" onclick="window.finalizeAuth()"
                style="width:100%; justify-content:center; background:var(--accent); color:black; font-weight:bold;">SUBMIT</button>

            <p style="margin-top:15px; font-size:0.8rem; color:#666; cursor:pointer;" onclick="window.toggleAuthMode()">
                <span id="auth-toggle-text">Need an account? Sign Up</span>
            </p>
        </div>
    </div>

    <div id="map-modal" class="modal-overlay" style="display:none;">
        <div class="glass-card full-screen" style="padding:0;">
            <button onclick="document.getElementById('map-modal').style.display='none'"
                style="position:absolute; top:20px; right:20px; z-index:999; background:black; color:white; width:30px; height:30px; border-radius:50%;">×</button>
            <div id="tactical-map" style="width:100%; height:100%;"></div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>

